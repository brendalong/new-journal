(this["webpackJsonpnew-journal"]=this["webpackJsonpnew-journal"]||[]).push([[0],{46:function(e,t,n){},56:function(e,t,n){},57:function(e,t,n){"use strict";n.r(t);var r=n(3),a=n(2),s=n.n(a),c=n(37),i=n.n(c),o=(n(46),n(19)),j=n(11),l=n(13),u=n(58),d=n(17),b=(n(47),Object(a.createContext)()),h=function(e){var t=sessionStorage.getItem("userProfile"),n=Object(a.useState)(null!=t),s=Object(l.a)(n,2),c=s[0],i=s[1],o=Object(a.useState)(!1),j=Object(l.a)(o,2),h=j[0],O=j[1],x=new d.a.auth.GoogleAuthProvider;Object(a.useEffect)((function(){d.a.auth().onAuthStateChanged((function(e){O(!0)}))}),[]);return Object(r.jsx)(b.Provider,{value:{isLoggedIn:c,login:function(e,t){return d.a.auth().signInWithEmailAndPassword(e,t).then((function(e){sessionStorage.setItem("userProfile",JSON.stringify(e.user)),i(!0)}))},logout:function(){return d.a.auth().signOut().then((function(){sessionStorage.clear(),i(!1)}))},register:function(e,t){return d.a.auth().createUserWithEmailAndPassword(e.email,t).then((function(e){console.log("savedU",e),sessionStorage.setItem("userProfile",JSON.stringify(e.user)),i(!0)}))},signInWithGoogle:function(){return d.a.auth().signInWithPopup(x).then((function(e){console.log("savedU",e),sessionStorage.setItem("userProfile",JSON.stringify(e.user)),i(!0)}))}},children:h?e.children:Object(r.jsx)(u.a,{className:"app-spinner dark"})})},O=n(63),x=n(62);function f(){var e=Object(j.g)(),t=Object(a.useContext)(b).login,n=Object(a.useContext)(b).signInWithGoogle,s=Object(a.useState)(),c=Object(l.a)(s,2),i=c[0],u=c[1],d=Object(a.useState)(),h=Object(l.a)(d,2),f=h[0],g=h[1];return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("h3",{children:"Login To View Your List"}),Object(r.jsxs)("div",{className:"login-options",children:[Object(r.jsx)("div",{className:"border-option",children:Object(r.jsx)(O.a,{onClick:function(){n().then((function(t){return e.push("/")}))},variant:"outline-primary",children:"Login With Google"})}),Object(r.jsx)(x.a,{onSubmit:function(n){n.preventDefault(),t(i,f).then((function(){return e.push("/")})).catch((function(){return alert("Invalid email or password")}))},className:"border-option",children:Object(r.jsxs)("fieldset",{children:[Object(r.jsx)("h5",{children:"or Login with Email and Password"}),Object(r.jsxs)(x.a.Group,{controlId:"formBasicEmail",children:[Object(r.jsx)(x.a.Label,{children:"Email address"}),Object(r.jsx)(x.a.Control,{type:"email",placeholder:"Enter email",onChange:function(e){return u(e.target.value)}})]}),Object(r.jsxs)(x.a.Group,{controlId:"formBasicPassword",children:[Object(r.jsx)(x.a.Label,{children:"Password"}),Object(r.jsx)(x.a.Control,{type:"password",placeholder:"Password",onChange:function(e){return g(e.target.value)}})]}),Object(r.jsx)(O.a,{variant:"primary",type:"submit",children:"Submit"}),Object(r.jsxs)("div",{children:[Object(r.jsx)("hr",{}),Object(r.jsxs)("em",{children:["No account? ",Object(r.jsx)(o.b,{to:"register",children:"Sign Up With Email and Password"})]})]})]})})]})]})}function g(){var e=Object(j.g)(),t=Object(a.useContext)(b).register,n=Object(a.useState)(),s=Object(l.a)(n,2),c=s[0],i=s[1],u=Object(a.useState)(),d=Object(l.a)(u,2),h=d[0],f=d[1],g=Object(a.useState)(),m=Object(l.a)(g,2),p=m[0],v=m[1],w=Object(a.useState)(),C=Object(l.a)(w,2),S=C[0],y=C[1];return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("h3",{children:"Register To Start Your Christmas List"}),Object(r.jsx)("div",{className:"login-options",children:Object(r.jsxs)("div",{className:"border-option",children:[Object(r.jsx)(x.a,{onSubmit:function(n){(n.preventDefault(),p&&p!==S)?alert("Passwords don't match. Do better."):t({name:c,email:h},p).then((function(){return e.push("/")}))},children:Object(r.jsxs)("fieldset",{children:[Object(r.jsxs)(x.a.Group,{children:[Object(r.jsx)(x.a.Label,{children:"Name"}),Object(r.jsx)(x.a.Control,{id:"name",type:"text",onChange:function(e){return i(e.target.value)}})]}),Object(r.jsxs)(x.a.Group,{controlId:"email",children:[Object(r.jsx)(x.a.Label,{children:"Email"}),Object(r.jsx)(x.a.Control,{type:"text",onChange:function(e){return f(e.target.value)}}),Object(r.jsx)(x.a.Text,{className:"text-muted",children:"We'll never share your email with anyone else."})]}),Object(r.jsxs)(x.a.Group,{controlId:"password",children:[Object(r.jsx)(x.a.Label,{children:"Password"}),Object(r.jsx)(x.a.Control,{type:"password",onChange:function(e){return v(e.target.value)}})]}),Object(r.jsxs)(x.a.Group,{controlId:"confirmPassword",children:[Object(r.jsx)(x.a.Label,{children:"Confirm Password"}),Object(r.jsx)(x.a.Control,{type:"password",onChange:function(e){return y(e.target.value)}})]}),Object(r.jsx)(O.a,{variant:"primary",type:"submit",children:"Register"})]})}),Object(r.jsxs)("div",{children:[Object(r.jsx)("hr",{}),Object(r.jsxs)("em",{children:["Already have an account? ",Object(r.jsx)(o.b,{to:"login",children:"Login"})]})]})]})})]})}var m=n(59),p=n(60),v=n(40),w="https://christmasjournal-d3efa.firebaseio.com",C=function(){var e=Object(a.useState)([]),t=Object(l.a)(e,2),n=t[0],s=t[1];return Object(a.useEffect)((function(){(console.log("auth",d.a.auth()),fetch("".concat(w,"/christList.json")).then((function(e){return e.json()}))).then((function(e){console.log("data",e);var t=Object.keys(e).map((function(t,n){return e[t].fbid=t,e[t]}));console.log("newArray",t),s(t)}))}),[]),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("h4",{children:"Christmas List"}),Object(r.jsx)(m.a,{fluid:!0,children:Object(r.jsx)(p.a,{children:n.map((function(e){return Object(r.jsx)(v.a,{className:"bgcolor",xs:12,md:6,lg:4,xl:2,children:Object(r.jsx)("h5",{children:e.title})},e.fbid)}))})})]})},S=n(32),y=n(31),I=n(61),L=n(39),P=function(){var e=Object(a.useState)({}),t=Object(l.a)(e,2),n=t[0],s=(t[1],Object(j.g)());console.log("current user uid",y.a.auth().currentUser.uid);return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("h4",{children:"Add To My Christmas List"}),Object(r.jsxs)(x.a,{children:[Object(r.jsxs)(x.a.Group,{controlId:"title",children:[Object(r.jsx)(x.a.Label,{children:"Title"}),Object(r.jsx)(x.a.Control,{type:"text",placeholder:"Name of item"})]}),Object(r.jsxs)(x.a.Group,{controlId:"formGroupPassword",children:[Object(r.jsx)(x.a.Label,{children:"Password"}),Object(r.jsx)(x.a.Control,{type:"text",placeholder:"Password"})]}),Object(r.jsxs)(I.a,{children:[Object(r.jsx)(I.a.Prepend,{children:Object(r.jsx)(I.a.Text,{children:"With textarea"})}),Object(r.jsx)(L.a,{as:"textarea","aria-label":"With textarea"})]}),Object(r.jsx)(O.a,{onClick:function(e){var t=Object(S.a)({},n);t.uid=y.a.auth().currentUser.uid,t.timestamp=Date.now(),function(e){return fetch("".concat(w,"/christList.json"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}(n).then((function(e){return s.push("/")}))},children:"Add To List"})]})]})};function N(){var e=Object(a.useContext)(b).isLoggedIn;return Object(r.jsx)("main",{children:Object(r.jsxs)(j.d,{children:[Object(r.jsx)(j.b,{path:"/",exact:!0,children:e?Object(r.jsx)(C,{}):Object(r.jsx)(j.a,{to:"/login"})}),Object(r.jsx)(j.b,{path:"/add",children:e?Object(r.jsx)(P,{}):Object(r.jsx)(j.a,{to:"/login"})}),Object(r.jsx)(j.b,{path:"/login",children:Object(r.jsx)(f,{})}),Object(r.jsx)(j.b,{path:"/register",children:Object(r.jsx)(g,{})})]})})}var G=function(){var e=Object(a.useContext)(b),t=e.isLoggedIn,n=e.logout;return Object(r.jsx)(r.Fragment,{children:Object(r.jsx)("div",{className:"header-nav",children:t?Object(r.jsx)(O.a,{onClick:n,variant:"outline-dark",size:"sm",children:"Logout"}):null})})};var A=function(){return Object(r.jsxs)("div",{className:"App",children:[Object(r.jsx)("h1",{children:"All I want for Christmas..."}),Object(r.jsx)(o.a,{basename:"/",children:Object(r.jsxs)(h,{children:[Object(r.jsx)(G,{}),Object(r.jsx)(N,{})]})})]})};n(56);d.a.initializeApp({apiKey:"AIzaSyCBRUk2LvEfwdOwCbj2E7WwrDNBARaIGKY",authDomain:"christmasjournal-d3efa.firebaseapp.com",databaseURL:"https://christmasjournal-d3efa.firebaseio.com",projectId:"christmasjournal-d3efa",storageBucket:"christmasjournal-d3efa.appspot.com",messagingSenderId:"355617880647",appId:"1:355617880647:web:5c1babbb8fd8f74f0fcf62"});var E=d.a.auth();console.log("auth",E),i.a.render(Object(r.jsx)(s.a.StrictMode,{children:Object(r.jsx)(A,{})}),document.getElementById("root"))}},[[57,1,2]]]);
//# sourceMappingURL=main.32f7f9ed.chunk.js.map